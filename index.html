<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEED. | Stockage Premium de Phrases Secrètes pour Cryptomonnaies</title>
    <!-- Ajouter le SDK Stripe -->
    <script src="https://js.stripe.com/v3/"></script>
    <!-- SDK PayPal -->
    <script src="https://www.paypal.com/sdk/js?client-id=AUkcSiz2mEgNcU6TFdxKij-FoNWgj_SgZS_JbIezpkq5IYMGGicb6O9I2n1h9taNfdGqx-OsRfv7sT2x&currency=EUR"></script>
    <style>
        /* Ton CSS existant reste inchangé */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #000;
            color: #fff;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        /* ... (le reste du CSS est identique) */
        /* Style pour le champ Stripe Elements */
        #card-element {
            background: #fff;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 class="logo">SEED.</h1>
            <p class="tagline">Sécurisez votre avenir crypto avec un stockage de phrases secrètes en acier inoxydable de qualité militaire.</p>
        </header>

        <main>
            <!-- Section produit 3D (inchangée) -->
            <section class="product-showcase">
                <div class="product-3d-container" id="product3dContainer">
                    <div class="product-3d" id="product3d">
                        <div class="steel-plate" id="steelPlate">
                            <div class="plate-face plate-front">
                                <div class="seed-grid">
                                    <div class="seed-cell" data-number="1"></div>
                                    <div class="seed-cell" data-number="13"></div>
                                    <div class="seed-cell" data-number="2"></div>
                                    <div class="seed-cell" data-number="14"></div>
                                    <div class="seed-cell" data-number="3"></div>
                                    <div class="seed-cell" data-number="15"></div>
                                    <div class="seed-cell" data-number="4"></div>
                                    <div class="seed-cell" data-number="16"></div>
                                    <div class="seed-cell" data-number="5"></div>
                                    <div class="seed-cell" data-number="17"></div>
                                    <div class="seed-cell" data-number="6"></div>
                                    <div class="seed-cell" data-number="18"></div>
                                    <div class="seed-cell" data-number="7"></div>
                                    <div class="seed-cell" data-number="19"></div>
                                    <div class="seed-cell" data-number="8"></div>
                                    <div class="seed-cell" data-number="20"></div>
                                    <div class="seed-cell" data-number="9"></div>
                                    <div class="seed-cell" data-number="21"></div>
                                    <div class="seed-cell" data-number="10"></div>
                                    <div class="seed-cell" data-number="22"></div>
                                    <div class="seed-cell" data-number="11"></div>
                                    <div class="seed-cell" data-number="23"></div>
                                    <div class="seed-cell" data-number="12"></div>
                                    <div class="seed-cell" data-number="24"></div>
                                </div>
                            </div>
                            <div class="plate-face plate-back">
                                <div class="seed-logo-back">SEED.</div>
                            </div>
                            <div class="plate-edge plate-top"></div>
                            <div class="plate-edge plate-bottom"></div>
                            <div class="plate-edge plate-left"></div>
                            <div class="plate-edge plate-right"></div>
                        </div>
                    </div>
                    <div class="spotlight" id="spotlight"></div>
                    <div class="spotlight-secondary" id="spotlightSecondary"></div>
                    <div class="product-3d-instructions">
                        Cliquez et faites glisser pour faire pivoter
                    </div>
                </div>
            </section>

            <div class="product-section">
                <div class="product-info">
                    <h2 class="product-title">Stockage Premium de Phrases Secrètes en Acier Inoxydable</h2>
                    <p class="product-description">
                        Les plaques SEED sont conçues en acier inoxydable 316L premium pour protéger de façon permanente vos phrases secrètes de cryptomonnaie contre le feu, l'eau et le temps. Notre méthode de gravure laser de précision garantit que vos clés restent lisibles et sécurisées pour les générations futures.
                    </p>
                    <div class="features">
                        <div class="feature">
                            <h3 class="feature-title">Résistant au feu</h3>
                            <p class="feature-description">Supporte des températures jusqu'à 1400°C (2550°F)</p>
                        </div>
                        <div class="feature">
                            <h3 class="feature-title">Étanche</h3>
                            <p class="feature-description">Résistant à la corrosion dans tous les environnements</p>
                        </div>
                        <div class="feature">
                            <h3 class="feature-title">Inviolable</h3>
                            <p class="feature-description">Le sceau de sécurité révèle tout accès non autorisé</p>
                        </div>
                        <div class="feature">
                            <h3 class="feature-title">Pérenne</h3>
                            <p class="feature-description">Conçu pour durer des siècles</p>
                        </div>
                    </div>
                </div>

                <div class="product-card">
                    <div class="price" id="price-display">
                        <span id="price-value">27,99</span> <span class="price-currency">EUR</span>
                    </div>
                    <div class="quantity-selector">
                        <span class="quantity-label">Quantité:</span>
                        <div class="quantity-controls">
                            <button class="quantity-btn" id="decrease-quantity">-</button>
                            <input type="number" class="quantity-input" id="quantity" value="1" min="1" max="10">
                            <button class="quantity-btn" id="increase-quantity">+</button>
                        </div>
                    </div>
                    
                    <div class="payment-options">
                        <div class="payment-primary">
                            <button class="payment-button apple-pay-button" id="apple-pay-button">
                                <svg class="payment-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M9 7c-3 0-4 3-4 5.5 0 3 2 7.5 4 7.5 1.088-.046 1.679-.5 3-.5 1.312 0 1.5.5 3 .5s4-3 4-5c-.028-.01-2.472-.403-2.5-3-.019-2.17 2.416-2.954 2.5-3-1.023-1.492-2.951-1.963-3.5-2-1.433-.111-2.83 1-3.5 1-.68 0-1.9-1-3-1z"/>
                                    <path d="M12 4a2 2 0 0 0 2-2c0 1.1-.9 2-2 2z"/>
                                </svg>
                                Apple Pay
                            </button>
                            <button class="payment-button crypto-button" id="crypto-payment-button">
                                <svg class="payment-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                                    <path d="M12 6v12"/>
                                    <path d="M8 12h8"/>
                                </svg>
                                Payer en Crypto
                            </button>
                        </div>
                        
                        <div class="payment-divider">ou payer avec</div>
                        
                        <div class="payment-secondary">
                            <div id="paypal-button-container" style="width: 100%;"></div>
                            <div id="card-element"></div> <!-- Conteneur pour Stripe Elements -->
                            <button class="payment-button card-button" id="card-button">
                                <svg class="payment-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="2" y="5" width="20" height="14" rx="2"/>
                                    <line x1="2" y1="10" x2="22" y2="10"/>
                                </svg>
                                Carte Bancaire
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <div class="footer-content">
                <div class="copyright">© 2024 SEED. Tous droits réservés.</div>
                <div class="footer-links">
                    <a href="index.html" class="footer-link">Accueil</a>
                    <a href="confidentialite.html" class="footer-link">Confidentialité</a>
                    <a href="conditions.html" class="footer-link">Conditions</a>
                    <a href="contact.html" class="footer-link">Contact</a>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Constantes
        const BASE_PRICE = 27.99;
        
        // Éléments DOM
        const decreaseBtn = document.getElementById('decrease-quantity');
        const increaseBtn = document.getElementById('increase-quantity');
        const quantityInput = document.getElementById('quantity');
        const priceDisplay = document.getElementById('price-display');
        const priceValue = document.getElementById('price-value');
        
        // Boutons de paiement
        const applePayButton = document.getElementById('apple-pay-button');
        const cryptoButton = document.getElementById('crypto-payment-button');
        const cardButton = document.getElementById('card-button');

        // Contrôles de rotation 3D (inchangés)
        const product3dContainer = document.getElementById('product3dContainer');
        const product3d = document.getElementById('product3d');
        const steelPlate = document.getElementById('steelPlate');
        const spotlight = document.getElementById('spotlight');
        const spotlightSecondary = document.getElementById('spotlightSecondary');
        
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let rotationX = 20;
        let rotationY = 0;
        
        // Mise à jour du prix
        function updatePrice() {
            const quantity = parseInt(quantityInputMosl.value);
            const totalPrice = (quantity * BASE_PRICE).toFixed(2).replace('.', ',');
            priceValue.textContent = totalPrice;
        }

        // Contrôles de quantité
        decreaseBtn.addEventListener('click', () => {
            const currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
                updatePrice();
            }
        });

        increaseBtn.addEventListener('click', () => {
            const currentValue = parseInt(quantityInput.value);
            if (currentValue < 10) {
                quantityInput.value = currentValue + 1;
                updatePrice();
            }
        });

        quantityInput.addEventListener('change', () => {
            let value = parseInt(quantityInput.value);
            if (isNaN(value) || value < 1) {
                value = 1;
            } else if (value > 10) {
                value = 10;
            }
            quantityInput.value = value;
            updatePrice();
        });

        quantityInput.addEventListener('input', updatePrice);

        // Rotation 3D
        function updatePlateRotation() {
            product3d.style.transform = `rotateX(${rotationX}deg) rotateY(${rotationY}deg)`;
        }

        product3dContainer.addEventListener('mousemove', (e) => {
            const rect = product3dContainer.getBoundingClientRect();
            const x = ((e.clientX - rect.left) / rect.width) * 100;
            const y = ((e.clientY - rect.top) / rect.height) * 100;
            spotlight.style.setProperty('--x', `${x}%`);
            spotlight.style.setProperty('--y', `${y}%`);
            spotlightSecondary.style.setProperty('--x', `${x - 10}%`);
            spotlightSecondary.style.setProperty('--y', `${y - 10}%`);
        });

        product3dContainer.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMousePosition = { x: e.clientX, y: e.clientY };
            product3dContainer.style.cursor = 'grabbing';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            const deltaMove = { x: e.clientX - previousMousePosition.x, y: e.clientY - previousMousePosition.y };
            rotationY += deltaMove.x * 0.5;
            rotationX -= deltaMove.y * 0.5;
            rotationX = Math.max(-60, Math.min(60, rotationX));
            updatePlateRotation();
            previousMousePosition = { x: e.clientX, y: e.clientY };
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            product3dContainer.style.cursor = 'grab';
        });

        product3dContainer.addEventListener('touchstart', (e) => {
            isDragging = true;
            previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
            e.preventDefault();
        });

        document.addEventListener('touchmove', (e) => {
            if (!isDragging) return;
            const deltaMove = { x: e.touches[0].clientX - previousMousePosition.x, y: e.touches[0].clientY - previousMousePosition.y };
            rotationY += deltaMove.x * 0.5;
            rotationX -= deltaMove.y * 0.5;
            rotationX = Math.max(-60, Math.min(60, rotationX));
            updatePlateRotation();
            previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
            e.preventDefault();
        });

        document.addEventListener('touchend', () => {
            isDragging = false;
        });

        let autoRotate = setInterval(() => {
            rotationY += 0.2;
            updatePlateRotation();
        }, 30);

        product3dContainer.addEventListener('mouseenter', () => {
            clearInterval(autoRotate);
        });

        // Initialiser Stripe
        const stripe = Stripe('pk_live_51RKepCF5b7dGTJRmh0N682ZntmzOmicttddisrp5SXRPZxnXfMEds2PNlHWlRWJRqxWacCeUf2h7E1MoHjuvwjya00nMjONpWO');

        // Paiement Apple Pay
        async function handleApplePay() {
            const quantity = parseInt(quantityInput.value);
            const totalPrice = (quantity * BASE_PRICE).toFixed(2);
            
            try {
                const paymentRequest = stripe.paymentRequest({
                    country: 'FR',
                    currency: 'eur',
                    total: {
                        label: 'SEED Plaque',
                        amount: Math.round(totalPrice * 100)
                    },
                    requestPayerName: true,
                    requestPayerEmail: true
                });

                const result = await paymentRequest.canMakePayment();
                if (result && result.applePay) {
                    // Créer une intention de paiement
                    const response = await fetch('/create-payment-intent', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            amount: Math.round(totalPrice * 100),
                            currency: 'eur',
                            payment_method_types: ['card'],
                            automatic_payment_methods: { enabled: true }
                        })
                    });
                    const { clientSecret } = await response.json();

                    const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
                        payment_method: {
                            card: paymentRequest
                        }
                    });

                    if (error) {
                        alert('Erreur Apple Pay : ' + error.message);
                    } else if (paymentIntent.status === 'succeeded') {
                        alert('Paiement Apple Pay réussi !');
                    }
                } else {
                    alert('Apple Pay n\'est pas disponible sur cet appareil.');
                }
            } catch (err) {
                alert('Erreur : ' + err.message);
            }
        }

        // Paiement Carte Bancaire
        async function handleCardPayment() {
            const quantity = parseInt(quantityInput.value);
            const totalPrice = (quantity * BASE_PRICE).toFixed(2);

            try {
                // Créer une intention de paiement
                const response = await fetch('/create-payment-intent', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        amount: Math.round(totalPrice * 100),
                        currency: 'eur',
                        payment_method_types: ['card'],
                        automatic_payment_methods: { enabled: true }
                    })
                });
                const { clientSecret } = await response.json();

                // Initialiser Stripe Elements
                const elements = stripe.elements();
                const cardElement = elements.create('card', {
                    style: {
                        base: {
                            color: '#000',
                            fontSize: '16px',
                            '::placeholder': { color: '#aab7c4' }
                        }
                    },
                    hidePostalCode: true
                });
                cardElement.mount('#card-element');

                const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
                    payment_method: {
                        card: cardElement,
                        billing_details: {
                            name: 'Client SEED'
                        }
                    }
                });

                if (error) {
                    alert('Erreur Carte Bancaire : ' + error.message);
                } else if (paymentIntent.status === 'succeeded') {
                    alert('Paiement Carte Bancaire réussi !');
                }
            } catch (err) {
                alert('Erreur : ' + err.message);
            }
        }

        // Paiement Crypto avec Coinbase Commerce
        async function handleCryptoPayment() {
            const quantity = parseInt(quantityInput.value);
            const totalPrice = (quantity * BASE_PRICE).toFixed(2);

            try {
                const response = await fetch('https://api.commerce.coinbase.com/charges', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CC-Api-Key': 'TA_CLÉ_API_COINBASE_COMMERCE', // Remplacer par ta clé API
                        'X-CC-Version': '2018-03-22'
                    },
                    body: JSON.stringify({
                        name: 'SEED Plaque',
                        description: `Achat de ${quantity} plaque(s) SEED`,
                        local_price: {
                            amount: totalPrice,
                            currency: 'EUR'
                        },
                        pricing_type: 'fixed_price',
                        metadata: {
                            quantity: quantity
                        },
                        redirect_url: window.location.href + '?status=success',
                        cancel_url: window.location.href + '?status=cancel'
                    })
                });
                const { data } = await response.json();
                window.location.href = data.hosted_url; // Rediriger vers la page de paiement Coinbase
            } catch (err) {
                alert('Erreur Crypto : ' + err.message);
            }
        }

        // Gérer les retours Coinbase Commerce
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const status = urlParams.get('status');
            if (status === 'success') {
                alert('Paiement Crypto réussi !');
            } else if (status === 'cancel') {
                alert('Paiement Crypto annulé.');
            }
        });

        // PayPal
        paypal.Buttons({
            createOrder: function(data, actions) {
                const quantity = parseInt(quantityInput.value);
                const totalPrice = (quantity * BASE_PRICE).toFixed(2);
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: totalPrice,
                            currency_code: 'EUR',
                            breakdown: {
                                item_total: { value: totalPrice, currency_code: 'EUR' }
                            }
                        },
                        items: [{
                            name: 'SEED Plaque',
                            quantity: quantity,
                            unit_amount: { value: BASE_PRICE.toFixed(2), currency_code: 'EUR' }
                        }]
                    }]
                });
            },
            onApprove: function(data, actions) {
                return actions.order.capture().then(function(details) {
                    alert('Paiement PayPal réussi !');
                });
            },
            onError: function(err) {
                alert('Erreur PayPal : ' + err.message);
            }
        }).render('#paypal-button-container');

        // Gestionnaires des boutons
        applePayButton.addEventListener('click', handleApplePay);
        cryptoButton.addEventListener('click', handleCryptoPayment);
        cardButton.addEventListener('click', handleCardPayment);
    </script>
</body>
</html>



